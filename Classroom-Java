import java.util.HashMap;
import java.util.Map;
import java.util.*;
public class Classroom {

        public static void main(String[] args) {

            String[] students = {
                    "katie","clare","georgia","sarah","eoin","danielle","joe","seamus","bob","alex"
            };

            ArrayBag bag = new ArrayBag (200);
            Random rand = new Random();

            for (int i = 0; i < 100; i++) {
                String randomName = students[rand.nextInt(students.length)];
                bag.add(randomName);
            }

            System.out.println("bag contents:");
            bag.displayContents();
            System.out.println();

            Map<String, Integer> freqMap = bag.getFrequencyMap();
            int maxFreq = Collections.max(freqMap.values());

            System.out.println("most frequent name(s):");
            List<String> mostFrequentNames = new ArrayList<>();
            for (Map.Entry<String, Integer> entry : freqMap.entrySet()) {
                if (entry.getValue() == maxFreq) {
                    System.out.println(entry.getKey() + "(" + entry.getValue() + "times)");
                            mostFrequentNames.add(entry.getKey());
                }
            }
            System.out.println();

            for (String name : mostFrequentNames) {
                bag.removeAll(name);
            }

            System.out.println("number of names in bag after removal:" + bag.size());
            System.out.println();

            System.out.println("frequency tables for the remaining names:");
            Map<String, Integer> remainingFreq = bag.getFrequencyMap();
            for (Map.Entry<String, Integer> entry : remainingFreq.entrySet()) {
                System.out.println(entry.getKey() + ":" + entry.getValue());
            }
        }
    }

    class ArrayBag {
        private String[] bag;
        private int numberOfEntries;

        public ArrayBag(int capacity) {
            bag = new String[capacity];
            numberOfEntries = 0;
        }

        public boolean add(String item) {
            if (numberOfEntries < bag.length) {
                bag[numberOfEntries] = item;
                numberOfEntries++;
                return true;
            }
            return false;
        }

        public void removeAll(String item) {
            int i = 0;
            while (i < numberOfEntries) {
                if (bag[i].equals(item)) {
                    bag[i] = bag[numberOfEntries - 1];
                    bag[numberOfEntries - 1] = null;
                    numberOfEntries--;
                } else {
                    i++;
                }
            }
        }


        public Map<String, Integer> getFrequencyMap() {
            Map<String, Integer> freqMap = new HashMap<>();
            for (int i = 0; i < numberOfEntries; i++) {
                freqMap.put(bag[i], freqMap.getOrDefault(bag[i], 0) + 1);
            }
            return freqMap;
        }

        public int size() {
            return numberOfEntries;
        }

        public void displayContents() {
            for (int i = 0; i < numberOfEntries; i++) {
                System.out.print(bag[i] + " ");
            }

        }

    }

